/*!
 * jQuery Pongstagr.am Plugin 
 * Copyright (c) 2013 Pongstr Ordillo
 * Version: 2.0.5
 * Code license under Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 * Requires: jQuery v1.9 and Bootstrap JS
 */
(function(e,t,n,r){"use strict";function i(t,n,r){var i='<ul class="thumbnails"></ul>',s='<div class="row-fluid">'+i+"</div>",o='<div class="row-fluid"><a href="javascript:void(0);" data-paginate="'+n+'-pages" class="span4 offset4 btn btn-large btn-block btn-success">Load More</a></div>';e(t).append(s);if(r===null||r===true){e(t).after(o)}}function s(t,n,r,i,s,o){var u='<div id="'+n+'" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">';u+='<div class="modal-header">';u+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>';u+='<div class="row-fluid">';u+='<div class="span1"><img src="'+s+'" alt="" class="img-polaroid" style="width: 32px; height: 32px; margin-right: 10px; vertical-align: middle;" /></div>';u+='<div class="span10"><strong><a href="http://www.instagram.com/'+t+'">'+t+"</a> "+r+"</strong></div>";u+="</div><!-- end of .row-fluid -->";u+="</div><!-- end of .modal-header -->";u+='<div class="modal-body">';u+='<div class="row-fluid">';if(o!==0){u+='<div class="span7"><img src="'+i+'" alt="'+r+'" class="img-polaroid" /><br /></div>';u+='<div class="modal-comments span5"></div>'}else{u+='<div class="span10 offset1"><img src="'+i+'" alt="'+r+'" class="img-polaroid" /><br /></div>'}u+="</div><!-- end of .modal-fluid -->";u+="</div><!-- end of .modal-body -->";u+='<div class="modal-footer">';u+='<button class="btn btn-inverse btn-mini" data-dismiss="modal" aria-hidden="true">Close</button>';u+="</div><!-- end of .modal-footer -->";u+="</div><!-- end of .modal -->";e("body").append(u);e("#"+n).on("hidden",function(){e(this).remove();e("body").removeAttr("style")})}function o(t){e.ajax({method:"GET",url:t,cache:true,dataType:"jsonp",success:function(t){e.each(t.data,function(t,n){var r=n.images.low_resolution.url,i=n.caption!==null?n.caption.text!==null?n.caption.text:"":n.user.username,o=n.comments.count!==null?n.comments.count:"0",u=n.likes.count!==null?n.comments.count:"0",a=n.images.standard_resolution.url,f=n.id,l=n.user.profile_picture,c=n.user.username;var h='<li class="span3">';h+='<div class="thumbnail">';h+='<a href="#" class="btn btn-mini btn-info btn-likes"><i class="icon-heart icon-white"></i>  '+u+"</a>";h+='<a href="#" class="btn btn-mini btn-info btn-comments"><i class="icon-comment icon-white"></i>  '+o+"</a>";h+='<a href="#" role="button" data-toggle="modal" data-reveal-id="'+f+'"><img src="'+r+'" alt="'+i+'" /></a>';h+="</div>";h+="</li>";e(".thumbnails").append(h);e('[data-reveal-id="'+f+'"]').click(function(){var t=e("body").height();e(".modal").attr("id",f);e("body").css({"padding-bottom":t*1.5});s(c,f,i,a,l,o);e.each(n.comments.data,function(t,n){var r='<div class="row-fluid">';r+='<div class="span2"><img src="'+n.from.profile_picture+'" style="width: 36px; height: 36px; margin-right: 10px; vertical-align: middle;" class="img-polaroid" /></div>';r+='<div class="span9 offset1">';r+='<a href="http://www.instagram.com/'+n.from.username+'"><strong>'+n.from.username+"</strong></a><br />";r+=n.text;r+="</div>";r+="</div><!-- end of .row-fluid -->";e(".modal-comments").append(r)});e("#"+f).modal()})});u(t.pagination.next_url)}})}function u(t){if(t===r||t===null){e(".btn").click(function(t){t.preventDefault();e(this).removeClass("btn-success").addClass("disabled btn-secondary")})}else{e(".btn").click(function(n){n.preventDefault();o(t);e(this).unbind(n)})}}function a(e,t,n,r,s,u){var a="https://api.instagram.com/v1/users/",f=t!==null?"?count="+t+"&access_token="+r:"?count="+8+"&access_token="+r,l=e===null?"recent":e;if(e===null||e==="recent"){var c=a+n+"/media/recent"+f;o(c,e)}if(e==="liked"){var h=a+"self/media/liked"+f;o(h)}if(e==="feed"){var p=a+"self/feed"+f;o(p)}if(e==="tag"){var d=a}i(s,l,u)}function f(e,t){if(e!==null||t!==null){return true}else{console.log("Please check whether your Access ID and Access Token if it's valid.");console.log("You may visit http://instagram.com/developer/authentication/ for more info.");return false}}e.fn.pongstgrm=function(t){if(typeof callback=="function"){callback.call(this)}var n=e.extend({},e.fn.pongstgrm.defaults,t);return this.each(function(e,t){if(f(n.accessId,n.accessToken)!==false){a(n.show,n.count,n.accessId,n.accessToken,t,n.pager)}})};e.fn.pongstgrm.defaults={accessId:null,accessToken:null,show:null,count:null,resolution:null,pager:null}})(jQuery,window,document)